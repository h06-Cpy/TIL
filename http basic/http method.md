# HTTP 메서드
## API 설계

회원정보 관리 API를 만들라는 요구사항이 들어옴

- 회원 목록 조회
- 회원 조회
- 회원 등록
- 회원 수정
- 회원 삭제

URI를 어케 만들까?

URI에서 가장 중요한 것은 **리소스 식별**

그래서 회원정보를 리소스에 매핑

근데 URI 설계했을 때 URI로 리소스에 대한 CRUD 어케 구분? —> http 메서드(GET, POST 등)

## http 메서드 종류

기타 메서드

- HEAD: GET과 동일하지만 메시지 헤더까지만 반환, 메시지 바디는 안함
- OPTIONS: 대상 리소스에 대한 통신 가능 옵션(메서드)을 설명(주로 CORS에서 사용)
- CONNECT: 대상 자원으로 식별되는 서버에 대한 터널을 설정
- TRACE: 대상 리소스에 대한 경로를 따라 메시지 루프백 테스트를 수행

 근데 CONNECT랑 TRACE는 잘 안쓰임

### GET

리소스 조회 용도

서버에 전달하고 싶은 데이터는 쿼리 파라미터(쿼리 스트링)를 통해 전달

메시지 바디 사용해서 데이터 전달 가능, 근데 지원하지 않는 곳이 많음

### POST

거의 만능, 요청 데이터 처리 용도로 주로 쓰임

메시지 바디를 통해 서버로 요청 데이터 전달

서버는 요청 데이터 처리, 메시지 바디를 통해 들어온 데이터를 처리하는 모든 기능 수행

주로 신규 리소스, 프로세스 처리에 사용

---

사용 예시

- 서버가 아직 식별하지 않은 새 리소스 생성
- html form에 입력된 정보로 회원 가입, 주문과 같은 정보들을 데이터 처리 프로세스에 제공
- 게시판 글쓰기, 댓글 달기와 같이 기사 그룹에 메시지 게시
- 기존 자원에 데이터 추가
- 다른 메서드로 처리하기 애매한 경우(JSON으로 조회 데이터 넘겨야 하는데 GET 사용 어려운 경우)

---

POST의 결과로 새로운 리소스 생성 안될 수도 있음

URI는 최대한 리소스 중심으로 설계하지만 그게 불가능할 때 컨트롤 URI를 통해 CRUD를 구현할 수 있음

### PUT
메시지에 담긴 경로에 리소스 없으면 생성

기존 리소스가 있으면 ‘완전히’ 대체(덮어쓰기)

클라이언트가 리소스 위치를 알아야함, POST는 알 필요 없음

그런데 기존 리소스를 완전히 대체할 때도 있지만 일부만 수정하고 싶을 때는 어떻게 함?

—> PATCH

### PATCH

리소스 부분 변경

그런데 일부 서버에서 지원을 안할 수도 있음... 그럴때는 POST 사용

### DELETE

말 그대로 리소스 삭제

## HTTP 메서드 속성

### 안전(Safe Methods)

메서드를 호출해도 해당 리소스를 변경하지 않음

계속 호출해서 로그 쌓이고 서버 장애가 생긴다느니 그런건 고려 안함

GET, HEAD가 안전함. 그냥 조회하니까!

### 멱등(Idempotent Methods)

똑같은 메서드를 몇번이고 호출하든 결과가 같은 것

외부 요인으로 중간에 리소스가 변경되는 것은 고려 안함

GET, PUT, DELETE는 멱등임 PUT의 경우 기존 리소스가 있든 없든 결과가 같다!

POST는 아님! 만약 댓글 다는 POST를 두번 호출하면 댓글을 두번 다는 것

활용: 자동 복구 메커니즘

만약 서버가 TIMEOUT 등으로 정상응답을 못주면 클라이언트가 같은 메서드를 다시 호출해도 되는가에 대한 판단 근거

### 캐시가능(Cacheable Methods)

만약 브라우저가 서버에 사이즈가 큰 이미지를 요청하고 받음, 그 다음 또 요청하고 받으면 시간이 오래 걸리기 때문에 캐시를 사용해서 브라우저 내에 이미지를 저장함

그래서 응답 결과 리소스를 캐시해서 사용해도 되는가?

GET, HEAD, POST, PATCH가 캐시 가능

실제로는 GET, HEAD정도만 캐시 사용, URL만 키로 고려하면 되니까 쉬움

POST, PATCH는 본문 내용까지(메시지 바디) 캐시 키로 고려해야 하는데 구현 어려움

---
출처: 모든 개발자를 위한 HTTP 웹 기본 지식 - 김영한님

https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/dashboard
