# 인터넷 네트워크
## intro

클라이언트와 서버가 메시지를 주고받음 클라가 보내면 서버가 받았다고 클라한테 다시 보냄

클라이언트가 hello world를 서버에게 전달할 때 서로 붙어 있으면 상관 없음

클라이언트랑 서버가 멀리 떨어져 있으면 어캄?

수많은 노드(해저 광캐이블, 인공위성 등 인터넷 망)를 거쳐서 전달해야 함

이때 어떤 규칙을 따라 전달할까??

## IP(Internet Protocol)

컴퓨터(클라이언트랑 서버)에 부여된 이름은 ip 주소 ex) 100.100.100.1

**ip가 하는 일: 지정된 ip 주소에 패킷 단위로 데이터 전달**

데이터를 전송할 때 패킷 정보를 같이 보냄. 패킷 정보에는 출발지 ip, 목적지 ip 등이 포함됨

한계

- 패킷을 받을 대상이 없거나 서비스 불능상태여도 패킷을 전송해버림(비연결성)
- 비신뢰성
    - 중간에 패킷 누락, 소실돼도 모름
    - 여러개 보내면 순서 뒤바뀔 수 있음
- 한 서버에서 여러 프로그램 돌리면 구분 못함

이것을 해결하려면?

## TCP(Transmission Control Protocol), UDP

ip stack 4계층

- 애플리케이션 계층-http, ftp
    - socket 라이브러리 포함
- OS에서 다루는 것
    - 전송 계층-tcp,udp
    - 인터넷 계층-ip
- 네트워크 인터페이스 계층
    - LAN 드라이버, LAN 장비

클라이언트에서 데이터를 전송할 때 계층에서 이뤄지는 일 과정

1. 프로그램이 hello world 메시지 생성
2. 소켓 라이브러리로 OS에 전달
3. TCP 정보 생성
4. IP 패킷 생성
5. LAN 카드로 가서 이더넷 프레임 씌우고 인터넷으로 간 후 서버에 전달

tcp/ip 패킷 정보: ip 패킷 정보 + 출발지 port, 목적지 port, 전송 제어, 순서, 검증 정보

**특징**

- 연결지향-TCP  3 way handshake (논리적으로 연결 되었다~)
- 데이터 전달 보증(잘 받았다~)
- 순서 보장
- 현재 대부분 TCP를 사용

TCP 3 way handshake

1. 클라→서버 SYN(접속 요청)
2. 서버→클라 SYN+ACK(요청 수락)
3. 클라→서버 ACK
4. 데이터 전송

요새는 최적화가 되어 3,4가 동시에!

### UDP(User Datagram Protocol)

IP+PORT+체크섬(메시지가 맞는지 검증)

애플리케이션에서 추가 작업 필요

왜 씀? 최적화하기 좋아서(TCP는 기능이 많고 이미 많이 쓰여서 손댈 수 없음)

그래도 TCP를 대부분 씀

## PORT

클라가 여러 프로그램을 돌리면 여러 서버랑 통신한다는 것임

**이때 패킷을 전달할때 프로그램이 뭔지 구분해줘야 함(프로세스 구분)** 

**그 때 필요한 것이 포트**

ip주소 다음 포트 넘버로 구분

0~65535까지 할당 가능

그러나 0~1023은 잘 알려져 있기 때문에 사용하지 않는 것이 좋음

- FTP: 20, 21
- TELNET: 23
- HTTP: 80
- HTTPS: 443

## DNS(Domain Name System)

IP 주소는 기억하기 어렵고 변경될 수 있음

그래서 인간이 기억하기 쉽게 ip주소랑 도메인 네임을 짝 지어놓음

**DNS는 도메인 명을 ip 주소로 변환해서 컴퓨터에게 알려준다**

ip 주소 기억 어려움, 변경 문제 해결!
